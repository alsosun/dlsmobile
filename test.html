<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Rubric</title>
	<meta name="viewport" content="width=device-width, initial-scale=0.85; userscalable=yes;" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
	<link rel="stylesheet" href="assets/css/style.css" />
	<link rel="stylesheet" href="assets/css/owl.carousel.css" />
	<link rel="stylesheet" href="assets/css/owl.theme.css" />
	<link rel="stylesheet" href="assets/css/photoswipe.css" />
	<script type="text/javascript" src="assets/js/klass.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
	<script type="text/javascript" src="assets/js/jstorage.js"></script>
	<script type="text/javascript" src="assets/js/retina.js"></script>
	<script type="text/javascript" src="assets/js/owl.carousel.min.js"></script>
	<script type="text/javascript" src="assets/js/code.photoswipe.jquery-3.0.5.min.js"></script>
	<script src="assets/js/custom.js"></script>
    <script type="text/javascript" src="assets/js/loadxmlout.js"></script>
    <script type="text/javascript" src="assets/js/loadxmldoc.js"></script>
    
</head>
<body>
    <div data-role="page">
	<div data-role="panel" data-position="left" data-theme="a" data-display="push" id="left_panel">
		<ul data-role="listview" data-inset="false" data-theme="a">
			<li><div style="text-align: center;"><img src="assets/img/logo.png" alt="Logo" /></div></li>
			<li><a data-transition="slide" href="index.html"><img src="assets/img/menu-icons/home.png" alt="Home" class="ui-li-icon" />Home</a></li>
			<li id="menu_news" class="countable"><a data-transition="slide" data-count="3" href="cur.html"><img src="assets/img/menu-icons/news.png" alt="Curriculum" class="ui-li-icon" />Curriculum<span class="ui-li-count hidden accent-color"></span></a></li>
			<li id="menu_recipes" class="countable"><a data-transition="slide" data-count="2" href="planners.html"><img src="assets/img/menu-icons/star.png" alt="Planners" class="ui-li-icon" />Planners<span class="ui-li-count hidden accent-color"></span></a></li>
			<li id="menu_gallery" class="countable"><a data-transition="slide" data-count="0" href="features.html"><img src="assets/img/menu-icons/information.png" alt="Features" class="ui-li-icon" />Features<span class="ui-li-count hidden accent-color"></span></a></li>
            <li id="menu_video" class="countable"><a data-transition="slide" data-count="2" href="video.html"><img src="assets/img/menu-icons/video.png" alt="Video" class="ui-li-icon" />Tutorials<span class="ui-li-count hidden accent-color"></span></a></li>
			<li id="menu_blog" class="countable"><a data-transition="slide" data-count="3" href="blog.html"><img src="assets/img/menu-icons/blog.png" alt="Blog" class="ui-li-icon" />News<span class="ui-li-count hidden accent-color"></span></a></li>
            <li><a data-transition="slide" href="information.html"><img src="assets/img/menu-icons/information.png" alt="Information" class="ui-li-icon" />Contact</a></li>
		</ul>
		<div style="position: relative; top: 15px;">
			<p>Socialize</p>
			<a href="https://twitter.com/DLS_Canada"><img src="assets/img/panel/twitter.png" alt="Twitter" /></a>
			<a href="https://www.facebook.com/Digitallearnersolutions"><img src="assets/img/panel/facebook.png" alt="Facebook" /></a>
			<a href="https://plus.google.com/101568684619478372786"><img src="assets/img/panel/google.png" alt="Google+" /></a>
			<a href="https://www.youtube.com/user/DLSolutions2013"><img src="assets/img/panel/youtube.png" alt="YouTube" /></a>
		</div>
	</div>
	<div data-role="panel" data-theme="a" data-position="right" data-display="push" id="right_panel">
		<div style="text-align: center;">
			<h4 style="margin-top: 0px;">Share this page on:</h4>
			<div class="panel-social-wrap">
				<a class="facebook_share_link" title="Share link on Facebook" target="_blank" href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]=http://www.digitallearnersolutions.com/m/&p[images][0]=&p[title]=Unit%20and%20Rubric%20Planner&p[summary]=" rel="nofollow">
					<div class="panel-social panel-social-twitter accent-color">
						<img src="assets/img/facebook.png" alt="Facebook" />
					</div>
				</a>
				<div class="panel-social-counter facebook_number"></div>
			</div>
			<div class="panel-social-wrap">
				<a class="twitter_share_link" title="Share link on Twitter" target="_blank" href="http://twitter.com/home?status=All%20teachers%20need%20to%20see%20this!%20http://www.digitallearnersolutions.com/m/%20" rel="nofollow">
					<div class="panel-social panel-social-facebook accent-color">
						<img src="assets/img/twitter.png" alt="Twitter" />
					</div>
				</a>
				<div class="panel-social-counter twitter_number"></div>
			</div>
			<div class="panel-social-wrap">
				<a class="google_share_link" title="Share link on Google+" target="_blank" href="https://plus.google.com/share?url=http://www.digitallearnersolutions.com/m/%20" rel="nofollow">
					<div class="panel-social panel-social-google accent-color">
						<img src="assets/img/google.png" alt="Google+" />
					</div>
				</a>
				<div class="panel-social-counter google_number"></div>
			</div>
		</div>
	</div>
	<div id="header" data-role="header" data-position="fixed" data-theme="c">
		<div class="header_wrapper">
			<a style="border-left: none;" class="header_button" href="#left_panel" data-inline="true" data-role="button" data-corners="false" data-theme="c">
				<img class="header-btn-image" style="width: 100%; height: 100%;" src="assets/img/menu.png" alt="Menu" />
				<span class="menu-btn-background"></span>
				<span class="counter-header hidden accent-color" style="color: #ffffff;"></span>
			</a>
			<span class="page_title">Rubric</span>
			<a style="float: right; border: none;" class="header_button" href="#" data-inline="true" data-rel="back" data-role="button" data-corners="false" data-theme="c">
				<img style="width: 100%; height: 100%;" src="assets/img/back.png" alt="Back" />
				<span class="btn-background"></span>
			</a>
			<a style="float: right;" class="header_button" href="#right_panel" data-inline="true" data-role="button" data-corners="false" data-theme="c">
				<img style="width: 100%; height: 100%;" src="assets/img/share.png" alt="Share" />
				<span class="btn-background share-btn-background"></span>
			</a>
			<div style="clear: both"></div>
		</div>
	</div>
    <div id="rubmenu" style="text-align:right">
        <a href="#popupMenu" data-rel="popup" data-role="button" data-inline="true" data-transition="slideup" data-icon="gear" data-theme="e" data-mini="true">Rubric Menu</a>
<div data-role="popup" id="popupMenu" data-theme="d">
        <ul data-role="listview" data-inset="true" style="min-width:210px;" data-theme="d">
            <li data-role="divider" data-theme="e">Choose an action</li>
            <li><a href="#">Add more outcomes</a></li>
            <li><a href="#">Start over</a></li>
            <li><a href="#">Save rubric</a></li>
            <li><a href="#">Open saved rubric</a></li>
        </ul>
</div>
 </div>       
    
<div id="grade_con" style="text-align:center">
    <form>
<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
    <legend></legend>
    
    <select name="select-native-11" id="classsel" onchange="section()">
            <option value="#">class</option>
            <option value="#">Demo Class</option>
    </select>
    
    <select name="select-native-12" id="gradedd" onchange="popsub()">
        <option value="#">Grade</option>
        <option>k</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
            <option>6</option>
            <option>7</option>
            <option>8</option>
            <option>9</option>
            <option>10</option>
            <option>20</option>
            <option>30</option>
    </select>
    
    <select name="select-native-13" id="subdd">
        <option value="#">Subject</option>
        
    </select>
</fieldset>
</form>
    <script>
        function section() {
            var classsel = $("#classsel option:selected").text()
            //localStorage.setItem('rubric', classsel);

        }
    </script>
    <script type="text/javascript">
        function popsub() {

            var gr = document.getElementById("gradedd").options[gradedd.selectedIndex].value;
            var dropdown = document.getElementById("subdd");
            dropdown.innerHTML = "";
            dropdown[dropdown.length] = new Option("select subject", "select subject");
            xml = loadXMLDoc("resources/sask/xml/saskcur.xml");
            path = "/curriculum/grade/subjects[@id='" + gr + "']"
            // code for IE
            if (window.ActiveXObject) {
                var nodes = xml.selectNodes(path);

                for (i = 0; i < nodes.length; i++) {
                    ddlist[0] = nodes[i].childNodes[0].nodeValue;
                    dropdown[dropdown.length] = new Option(ddlist[i], ddlist[i]);

                }
            }
                // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && document.implementation.createDocument) {
                var nodes = xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
                var result = nodes.iterateNext();

                while (result) {

                    var sub = result.childNodes[0].nodeValue
                    dropdown[dropdown.length] = new Option(sub, sub);
                    result = nodes.iterateNext();
                }
            }

        }
    </script>
     <script>
         $("#subdd").change(function () {
             popout();
         });
        </script>
        <script type="text/javascript">
            function popout() {

                var gr = gradedd.options[gradedd.selectedIndex].value;
                var sb = subdd.options[subdd.selectedIndex].value;
                loadXMLout("resources/sask/xml/" + sb + "_education_" + gr + ".xml", sb, gr);
                $("#outtable").show();
                $("#next").show();

            }

        </script>
 </div>
    
    
        
    <div id="outtable" hidden="hidden"></div>   
        <div id="next" hidden="hidden"><button id="add">Add items to Rubric</button>
            <script>
                              
                $('#add').on('click', function () {
                    if ($('input:checked').length < 1) {
                        $("#popupDialog").popup("open");
                        
                        return;
                    
                    }
                    var txt = "";
                    $('input:checked').each(function (i) {
                        i++;
                        $this = $(this).closest("tr");
                        var code = $this.find('td').eq(1).text();
                        var out = $this.find('td').eq(2).text();
                        
                        
                        txt = txt + "<table class='rubrictable' style='width:100%'><tr><th style='width:5%'>ID</th><th style='width:40%'>Outcome</th>\
                        <th style='width:5%'>R</th><th style='width:10%'>Level 1</th><th style='width:10%'>Level 2</th><th style='width:20%'>Level 3</th>\
                        <th style='width:10%'>Level 4</th></tr><tr><td>" + code + "</td><td>" + out + "</td><td></td><td>Beginning</td>\
                        <td>Progressing</td><td>Meeting</td><td>Established</td></tr></table>\
                        <form><input type='range' name='"+ code + "' id='" + code + "' data-highlight='true' min='0' max='100' value='50' /></form>";

                    });
                    
                    var rubric = txt;
                    $("#rubric").append(txt).trigger("create");
                    onRubric()
                    $("#rubric").show();
                    //localStorage.setItem('rubric', rubric);
                    $("#student").show();
                    $("#submit").show();
                    $("#report").show();
                    $("#export").show();
                    $("#outtable").hide();
                    $("#next").hide();
                    $("#grade_con").hide();
                    //window.location.href = "rubric.aspx";
                    
                });
                
            </script>
        </div>
        <div id="student" hidden="hidden">
            
                   <select id="studentdd">
                       <option>Student 1</option>
                       <option>Student 2</option>
                       <option>Student 3</option>
                       <option>Student 4</option>
                       <option>Student 5</option>
                       <option>customize</option>
                       <option>with pro</option>
                       <option>version</option>
                   </select>
        </div>
        <div id="rubric" hidden="hidden">
            <script type="text/javascript" charset="utf-8">

                function onRubric() {

                    //var value = window.localStorage.getItem('rubric');
                    //$("#rubric").append(value).trigger("create");

                    var rep = "<table id='rubtbl' class='rubrictable' style='width:100%'><thead><tr><td>Student</td>";
                    //reads slider #
                    var i = 1
                    $.mobile.activePage.find('[type=number]')
                        .each(function () {
                            var self = this;
                            var code = $(self).attr("name");
                            rep = rep + "<td>" + code + "</td>";
                            i++;
                        });

                    rep = rep + "</tr></thead><tbody><tr><td colspan='" + i + "'></td></tr></tbody></table>"
                    $("#report").append(rep).trigger("create")
                }

                
    </script>
        </div>
        <div id="submit" hidden="hidden">
        <a href="#popupDialog1" id="submitbtn" data-transition="pop" data-role="button" data-rel="popup">Submit</a>
        <script>
            $("#submitbtn").click(function () {
               slide();
            });

            function slide() {
                var count = 0;
                var sdnt = $("#student option:selected").text();
                var rep = "<tr><td>" + sdnt + "</td>"

                $.mobile.activePage.find('[type=number]')
                    .each(function () {
                        var self = this;
                        var code = $(self).attr("name");
                        var score = $(self).val();

                        rep = rep + "<td>" + score + "</td>"
                    });

                rep = rep + "</tr>"

                $("#rubtbl tbody:last").append(rep);//.trigger("create")

                //$("#popupDialog1").popup("open");
            }

            </script>
        
    </div>
        <div id="report" hidden="hidden">
            <h2>Class Report</h2>
            
        </div>
        <div id="export" hidden="hidden">
            <button>export</button>
        </div>
        
     <div data-role="popup" id="popupDialog" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1>Alert</h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content" style="text-align:center">
        
        <p>Please choose at least one outcome.</p>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">OK</a>
        
    </div>
</div>
        <div data-role="popup" id="popupDialog1" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
            <div data-role="header" data-theme="a" class="ui-corner-top">
            <h1>Alert</h1>
            </div>
                <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content" style="text-align:center">
        
                    <p>Student data added to report.</p>
                    <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">OK</a>
                </div>

    <div data-role="popup" id="pop" data-overlay-theme="a" data-theme="c" data-dismissible="false" style="max-width:400px;" class="ui-corner-all">
        <div data-role="header" data-theme="a" class="ui-corner-top">
    
        <h1>Change Text</h1>
        </div>
            <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content" style="text-align:center">
        
        <textarea id="txt" cols="20" rows="8" data-mini="true"></textarea>
        <a href="#" id="close" data-role="button" data-inline="true" data-rel="back" data-theme="c">OK</a>
        </div>
    </div>
</div>
</div>
    <script>
        var org;

        $(document).on('click', 'td', function () {
            if ($("#outtable").is(":visible") ){
                return
            };
            $('#pop').popup('open');
            var cell = $(this).text();
            org = $(this);
            $('#txt').val(cell)

        });

        $('#close').on('click', function (event) {
            var newTXT = $('#txt').val()
            //alert(newTXT) 
            $(org).html(newTXT)
        });
    </script>


</body>
</html>
